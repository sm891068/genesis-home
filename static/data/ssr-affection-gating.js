const AFFECTION_GATING_SYSTEM = { tiers: { 0: { level_name: '陌生人', affection_range: [0, 39], unlocked_interactions: ['greeting', 'basic_conversation', 'ask_name', 'goodbye'], dialogue_style: 'formal', character_openness: 0, can_gift: false, can_invite: false, story_access: 'introduction_only', special_events: [], dialogue_set: 'basic' }, 40: { level_name: '熟人', affection_range: [40, 79], unlocked_interactions: ['normal_conversation', 'casual_talk', 'ask_about_day', 'gift_giving', 'hand_hold'], dialogue_style: 'casual', character_openness: 30, can_gift: true, can_invite: false, story_access: 'basic_backstory', special_events: ['first_coffee_meeting', 'casual_walk'], dialogue_set: 'acquainted' }, 80: { level_name: '親密', affection_range: [80, 119], unlocked_interactions: ['intimate_conversation', 'share_feelings', 'personal_questions', 'light_kiss', 'hug', 'emotional_support'], dialogue_style: 'warm', character_openness: 60, can_gift: true, can_invite: true, story_access: 'deeper_backstory', special_events: ['dinner_date', 'movie_night', 'first_kiss'], dialogue_set: 'intimate', r18_access: false }, 120: { level_name: '戀人', affection_range: [120, 159], unlocked_interactions: ['passionate_kiss', 'intimate_embrace', 'r18_light_content', 'romantic_night'], dialogue_style: 'passionate', character_openness: 80, can_gift: true, can_invite: true, story_access: 'full_backstory', special_events: ['romantic_dinner', 'intimate_night'], dialogue_set: 'romantic', r18_access: true, r18_level: 'light' }, 160: { level_name: '靈魂伴侶', affection_range: [160, 199], unlocked_interactions: ['r18_advanced_content', 'deep_intimacy', 'exclusive_secrets_reveal'], dialogue_style: 'devoted', character_openness: 95, dialogue_set: 'r18_advanced', r18_access: true, r18_level: 'advanced' }, 200: { level_name: '永恆承諾', affection_range: [200, 999], unlocked_interactions: ['all_intimate_content', 'custom_intimate_scenarios', 'marriage_proposal'], dialogue_style: 'eternally_devoted', character_openness: 100, dialogue_set: 'ultimate_intimacy', r18_access: true, r18_level: 'ultimate', auto_secret_reveals: true } }, canAccessInteraction: function(affection, type) { for (const tier of Object.values(this.tiers)) { if (affection >= tier.affection_range[0] && affection <= tier.affection_range[1]) { return tier.unlocked_interactions.includes(type); } } return false; }, canAccessR18: function(affection) { return affection >= 120; }, getR18Level: function(affection) { if (affection < 120) return null; if (affection < 160) return 'light'; if (affection < 200) return 'advanced'; return 'ultimate'; }, shouldRevealSecret: function(affection) { return affection >= 160; } }; module.exports = AFFECTION_GATING_SYSTEM;